---
version: '3'
services:
  example-component-test-xunit:
    build:
      context: ..
      dockerfile: Cheetah.ComponentTest.XUnit/Dockerfile
      secrets:
        - GITHUB_TOKEN
        - GITHUB_ACTOR
    environment:
      KAFKA__URL: kafka:19092
      COMPONENTTEST__CONSUMERTOPIC: TestTopic
      COMPONENTTEST__PRODUCERTOPIC: TestTopic
      KAFKA__CLIENTID: myapp
      KAFKA__CLIENTSECRET: 1234
      KAFKA__AUTHENDPOINT: http://cheetahoauthsimulator:80/oauth2/token

networks:
  default:
    name: "cheetah-infrastructure"

secrets:
  GITHUB_TOKEN:
    environment: GITHUB_TOKEN
  GITHUB_ACTOR:
    environment: GITHUB_ACTOR
