<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Testing with Cheetah.OpenSearch | Cheetah Nuget Packages </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Testing with Cheetah.OpenSearch | Cheetah Nuget Packages ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/KastTrifork/cheetah-lib-shared-dotnet/blob/main/docs/articles/Cheetah.OpenSearch/TestingWithCheetahOpenSearch.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="testing-with-cheetahopensearch">Testing with Cheetah.OpenSearch</h1>

<p>In order to easily test other components which communicate with OpenSearch, Cheetah.OpenSearch includes a simple way to generate test clients that can be used to verify the behavior of other components.</p>
<div class="CAUTION">
<h5>Caution</h5>
<p>The clients generated using the methods described here are intended to be short-lived and used solely for testing purposes. They have not been tested to work in long-running applications and should not be used in production scenarios. Instead, use the clients registered through <code>serviceCollection.AddCheetahOpenSearch()</code>;</p>
</div>
<p>In order to create a test client, you'll need to give it proper configuration. This requires either an <code>OpenSearchConfig</code> instance or an <code>IConfiguration</code> with the same configuration requirements as described in see <a href="UsingCheetahOpenSearch.html#configuration">Using Cheetah.OpenSearch | Configuration</a>.</p>
<p>The following snippet creates a new client with the given configuration:</p>
<pre><code class="lang-csharp">var configuration = new ConfigurationBuilder()
    .AddJsonFile(&quot;appsettings.Test.json&quot;)
    .AddEnvironmentVariables()
    .Build();

IOpenSearchClient testClient = OpenSearchTestClient.Create(configuration);
</code></pre>
<p>The returned client is a pre-configured OpenSearchClient from OpenSearch's own library - For more information on how to use the client, see: <a href="https://opensearch.org/docs/latest/clients/OSC-dot-net/">Getting started with the high-level .NET client (OpenSearch.Client)</a></p>
<p>This can be used either in isolation or in conjunction with other methods (Publishing messages to Kafka, calling endpoints on an API) to verify that another component either creates or reacts to changes in OpenSearch in the manner you expect.</p>
<p>It is also possible to supply an <code>OpenSearchClientOptions</code> instance to the creation of the test client in order to modify client behavior. This follows the same concept as <a href="UsingCheetahOpenSearch.html#modifying-client-behavior">Using Cheetah.OpenSearch | Modifying Client Behavior</a>.</p>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
